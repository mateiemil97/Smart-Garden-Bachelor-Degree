<ion-header>
  <ion-toolbar color="primary">
    <ion-buttons slot="start">
      <ion-back-button defaultHref="home"></ion-back-button>
    </ion-buttons>
    <ion-title slot="secondary">Sign Up</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>
  <form #form="ngForm" (ngSubmit)="register(form)">
    <ion-grid>
      <ion-row>
        <ion-col size-sm="6" offset-sm="3">
          <ion-item>
            <ion-label position="floating">Last name</ion-label>
            <ion-input required type="text" [(ngModel)]="userForRegister.lastName" name="lastName"
              #lastNameCtrl="ngModel">
            </ion-input>
          </ion-item>
          <ion-item lines="none" *ngIf="lastNameCtrl.touched && !lastNameCtrl.value">
            <ion-label color="danger">Last name is required</ion-label>
          </ion-item>
        </ion-col>
      </ion-row>
      <ion-row>
        <ion-col size-sm="6" offset-sm="3">
          <ion-item>
            <ion-label position="floating">First name</ion-label>
            <ion-input required type="text" [(ngModel)]="userForRegister.firstName" name="firstName"
              #firstNameCtrl="ngModel">
            </ion-input>
          </ion-item>
          <ion-item lines="none" *ngIf="firstNameCtrl.touched && !firstNameCtrl.value">
            <ion-label color="danger">First name is required</ion-label>
          </ion-item>
        </ion-col>
      </ion-row>
      <ion-row>
        <ion-col size-sm="6" offset-sm="3">
          <ion-item>
            <ion-label position="floating">Email</ion-label>
            <ion-input required type="email" pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,3}$" [(ngModel)]="userForRegister.email" name="email" #emailCtrl="ngModel">
            </ion-input>
          </ion-item>
          <ion-item lines="none" *ngIf="emailCtrl.touched && emailCtrl.errors?.pattern">
            <ion-label>Should be a valid email adress</ion-label>
          </ion-item>
        </ion-col>
      </ion-row>
      <ion-row>
        <ion-col size-sm="6" offset-sm="3">
          <ion-item>
            <ion-label position="floating">Password</ion-label>
            <ion-input  required type="password" [(ngModel)]="userForRegister.password" name="password"
              #passwordCtrl="ngModel">
            </ion-input>
          </ion-item>
          <ion-item *ngIf="passwordCtrl.touched && !passwordCtrl.value" lines="none">
            <ion-label color="danger">Password is required</ion-label>
          </ion-item>
        </ion-col>
      </ion-row>
      <ion-row>
        <ion-col size-sm="6" offset-sm="3">
          <ion-item>
            <ion-label position="floating">Confirm password</ion-label>
            <ion-input required type="password" [(ngModel)]="userForRegister.confirmPassword" name="confirmPassword"
              #confirmPasswordCtrl="ngModel">
            </ion-input>
          </ion-item>
          <ion-item *ngIf="passwordCtrl.touched && passwordCtrl.value != confirmPasswordCtrl.value" lines="none">
            <ion-label color="danger">Inconsistent password</ion-label>
          </ion-item>
        </ion-col>
      </ion-row>
      <ion-row>
        <ion-col size-sm="6" offset-sm="3">
          <ion-item>
            <ion-label position="floating">Country</ion-label>
            <ion-input type="text" [(ngModel)]="userForRegister.country" name="country"></ion-input>
          </ion-item>
        </ion-col>
      </ion-row>
      <ion-row>
        <ion-col size-sm="6" offset-sm="3">
          <ion-item>
            <ion-label position="floating">City</ion-label>
            <ion-input type="text" [(ngModel)]="userForRegister.city" name="city"></ion-input>
          </ion-item>
        </ion-col>
      </ion-row>
      <ion-button [disabled]="!form.valid || passwordCtrl.value != confirmPasswordCtrl.value" type="submit" color="primary" expand="block" class="register-button">Register
      </ion-button>
    </ion-grid>
  </form>
</ion-content>